<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memeriksa koneksi...</title>

<style>
body {
    margin: 0;
    background: #f7f7f7;
    font-family: Arial, sans-serif;
    color: #444;
    text-align: center;
}

.container {
    margin-top: 20%;
}

#statusText {
    margin-top: 20px;
    font-size: 20px;
}

#pingText {
    margin-top: 5px;
    font-size: 16px;
    color: #666;
}

/* 12 Titik Spinner */
.spinner {
    position: relative;
    width: 60px;
    height: 60px;
    margin: 0 auto;
}

.spinner div {
    transform-origin: 30px 30px;
    animation: spinner 1.2s linear infinite;
    position: absolute;
    width: 6px;
    height: 6px;
    background: #ff7300;
    border-radius: 50%;
    top: 27px;
    left: 27px;
}

.spinner div:nth-child(1) { transform: rotate(0deg) translate(20px); animation-delay: -1.1s; }
.spinner div:nth-child(2) { transform: rotate(30deg) translate(20px); animation-delay: -1s; }
.spinner div:nth-child(3) { transform: rotate(60deg) translate(20px); animation-delay: -0.9s; }
.spinner div:nth-child(4) { transform: rotate(90deg) translate(20px); animation-delay: -0.8s; }
.spinner div:nth-child(5) { transform: rotate(120deg) translate(20px); animation-delay: -0.7s; }
.spinner div:nth-child(6) { transform: rotate(150deg) translate(20px); animation-delay: -0.6s; }
.spinner div:nth-child(7) { transform: rotate(180deg) translate(20px); animation-delay: -0.5s; }
.spinner div:nth-child(8) { transform: rotate(210deg) translate(20px); animation-delay: -0.4s; }
.spinner div:nth-child(9) { transform: rotate(240deg) translate(20px); animation-delay: -0.3s; }
.spinner div:nth-child(10) { transform: rotate(270deg) translate(20px); animation-delay: -0.2s; }
.spinner div:nth-child(11) { transform: rotate(300deg) translate(20px); animation-delay: -0.1s; }
.spinner div:nth-child(12) { transform: rotate(330deg) translate(20px); animation-delay: 0s; }

@keyframes spinner {
    0%, 20%, 80%, 100% { opacity: 0.2; }
    50% { opacity: 1; }
}

#retryButton {
    display: none;
    margin-top: 20px;
    padding: 10px 20px;
    background: #ff7300;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}
#retryButton:hover { background: #e55b00; }
</style>
</head>
<body>

<div class="container">
    <div class="spinner">
        <div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div>
    </div>
    <div id="statusText">Checking your browser...</div>
    <div id="pingText">Ping: -- ms</div>
    <button id="retryButton" onclick="reloadPage()">Coba Lagi</button>
</div>

<script>
let tries = 0;
const maxTries = 5;
const maxPing = 500; // ms

async function cekPing() {
    const url = "https://www.google.com/favicon.ico";
    const startTime = performance.now();

    try {
        await fetch(url, { mode: "no-cors", cache: "no-store" });
        const endTime = performance.now();
        const ping = Math.round(endTime - startTime);

        document.getElementById("pingText").textContent = "Ping: " + ping + " ms";

        if (ping < 150) {
            document.getElementById("statusText").textContent = "Koneksi stabil, membuka website...";
            setTimeout(() => {
                window.location.href = "https://contohwebsite.com"; // Ganti dengan website tujuan
            }, 1000);
        } else if (ping < maxPing) {
            document.getElementById("statusText").textContent = "Ping tinggi, mencoba lagi...";
            tries++;
            if (tries < maxTries) setTimeout(cekPing, 1000);
            else showFailed();
        } else {
            showFailed();
        }
    } catch (error) {
        showFailed();
    }
}

function showFailed() {
    document.getElementById("statusText").textContent = "Website gagal merespon.";
    document.getElementById("pingText").textContent = "";
    document.getElementById("retryButton").style.display = "inline-block";
}

function reloadPage() {
    document.getElementById("retryButton").style.display = "none";
    document.getElementById("statusText").textContent = "Checking your browser...";
    document.getElementById("pingText").textContent = "Ping: -- ms";
    tries = 0;
    cekPing();
}

// Mulai ping test
cekPing();
</script>

</body>
</html>